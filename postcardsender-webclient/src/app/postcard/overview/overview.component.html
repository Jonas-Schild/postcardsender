<div class="card shadow">
  <div class="card-header">
    <span style="font-size: 1.5em">Postkartenbild</span>
    <button class="btn btn-outline-secondary float-right" (click)="goToStep(1)"><i class="fa fa-edit"
                                                                                   style="font-size: 1.5em; margin-right: 0.5em;"></i>
      Ändern
    </button>
  </div>
  <div class="card-body">

    <div *ngIf="!!imageFile" class="row">
      <img [src]="imageFile">
    </div>
  </div>
  <div class="card-footer">
    <button class="btn btn-outline-secondary float-right" (click)="openModal(preview, 'front')"
            [disabled]="!postcard.id">Vorschau Vorderseite
    </button>
  </div>
</div>

<div class="card shadow">
  <div class="card-header">
    <span style="font-size: 1.5em">Postkartenrückseite</span>
  </div>
  <div class="card-body">

    <div class="row">
      <div class="col-lg-6">
        <div class="card shadow">
          <div class="card-header">
            <span style="font-size: 1.5em">Text</span>
            <button class="btn btn-outline-secondary float-right" (click)="goToStep(2)"><i class="fa fa-edit"
                                                                                           style="font-size: 1.5em; margin-right: 0.5em;"></i>
              Ändern
            </button>
          </div>
          <div class="card-body">
            <div style="white-space: pre-wrap;">{{postcard.text}}</div>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="row">
          <div class="col-lg-12">
            <div class="card shadow">
              <div class="card-header">
                <span style="font-size: 1.5em">Absender</span>
                <button class="btn btn-outline-secondary float-right" (click)="goToStep(4)"><i class="fa fa-edit"
                                                                                               style="font-size: 1.5em; margin-right: 0.5em;"></i>
                  Ändern
                </button>
              </div>
              <div class="card-body">
                <div>
                  <div>{{postcard.senderFirstname}} {{postcard.senderLastname}}</div>
                  <div>{{postcard.senderStreet}} {{postcard.senderHousenr}} </div>
                  <div>{{postcard.senderZip}} {{postcard.senderCity}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <div class="card shadow">
              <div class="card-header">
                <span style="font-size: 1.5em">Empfänger</span>
                <button class="btn btn-outline-secondary float-right" (click)="goToStep(3)"><i class="fa fa-edit"
                                                                                               style="font-size: 1.5em; margin-right: 0.5em;"></i>
                  Ändern
                </button>
              </div>
              <div class="card-body">
                <div>
                  <div>{{postcard.recipientFirstname}} {{postcard.recipientLastname}}</div>
                  <div>{{postcard.recipientStreet}} {{postcard.recipientHousenr}} </div>
                  <div>{{postcard.recipientZip}} {{postcard.recipientCity}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>
  <div class="card-footer">
    <button class="btn btn-outline-secondary float-right" (click)="openModal(preview, 'back')"
            [disabled]="!postcard.id">Vorschau Rückseite
    </button>
  </div>
</div>

<button *ngIf="!approveLoading" class="btn btn-primary" (click)="approveCard()" [disabled]="!postcard.id">Postkarte
  abschicken
</button>
<div *ngIf="approveLoading" class="spinner-border" role="status">
  <span class="sr-only">Loading...</span>
</div>

<ng-template #preview let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Vorschau</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div *ngIf="prevLoading" class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
    <div *ngIf="!prevLoading">
      <img *ngIf="prevImg" [src]="'data:image/jpeg;base64,' + prevImg">
      <div *ngIf="!prevImg" translate>Vorschau kann leider nicht aufgerufen werden. Bitte versuchen Sie es in 10
        Sekunden noch einmal
      </div>
    </div>
  </div>
</ng-template>
